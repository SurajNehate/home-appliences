<mat-sidenav-container class="app-shell">
  <mat-sidenav #sidenav
               class="app-sidenav"
               [mode]="isHandset ? 'over' : 'side'"
               [opened]="!isHandset">
    <div class="sidenav-header">
      <span class="material-symbols-outlined">storefront</span>
      <span class="brand">havenza</span>
    </div>
    <mat-nav-list>
      <a mat-list-item [routerLink]="['/products']" (click)="closeIfHandset()">
        <span class="material-symbols-outlined">view_list</span>
        <span>Products</span>
      </a>
      <a mat-list-item [routerLink]="['/cart']" (click)="closeIfHandset()">
        <span class="material-symbols-outlined">shopping_cart</span>
        <span>Cart ({{ cartCount }})</span>
      </a>
      <a mat-list-item *ngIf="isAdmin()" [routerLink]="['/admin']" (click)="closeIfHandset()">
        <span class="material-symbols-outlined">admin_panel_settings</span>
        <span>Admin</span>
      </a>
      <a mat-list-item [routerLink]="['/contact-us']" (click)="closeIfHandset()">
        <span class="material-symbols-outlined">contact_support</span>
        <span>Contact</span>
      </a>
    </mat-nav-list>
  </mat-sidenav>

  <mat-sidenav-content>
    <mat-toolbar color="primary" class="app-toolbar">
      <button mat-icon-button *ngIf="isHandset" (click)="sidenav.toggle()" aria-label="Open menu">
        <span class="material-symbols-outlined">menu</span>
      </button>
      <button mat-icon-button (click)="toggleTheme()" aria-label="Toggle theme">
        <span class="material-symbols-outlined">dark_mode</span>
      </button>
      <span class="spacer"></span>
      <a mat-icon-button [routerLink]="['/cart']" aria-label="Cart" class="cart-link">
        <span class="material-symbols-outlined">shopping_cart</span>
        <span class="cart-badge" aria-label="Cart items">{{ cartCount }}</span>
      </a>
      <ng-container *ngIf="auth.currentUser$ | async as user; else loggedOut">
        <a mat-button [routerLink]="['/profile']">Hi, {{ user.name }}</a>
        <button mat-button (click)="logout()">Logout</button>
      </ng-container>
      <ng-template #loggedOut>
        <a mat-button [routerLink]="['/admin-login']">Sign in</a>
      </ng-template>
    </mat-toolbar>

    <main class="app-content">
      <router-outlet />
    </main>
  </mat-sidenav-content>
</mat-sidenav-container>
